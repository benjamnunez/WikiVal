{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Envy/Documents/GitHub/WikiVal/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ionic/storage-angular\";\nexport class BdlocalService {\n  constructor(storage) {\n    this.storage = storage;\n    this.usuario = [];\n    this._storage = null;\n    this.Init();\n  }\n  Init() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      const storage = yield _this.storage.create();\n      _this._storage = storage;\n    })();\n  }\n  logIn(uName, ingresado) {\n    this.usuario.unshift({\n      username: uName,\n      joined: ingresado\n    });\n    this._storage?.set('usuario', this.usuario);\n    console.log('Usuario guardado');\n  }\n  cargarDatos() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      const miUsuario = yield _this2.storage.get('usuario');\n      if (miUsuario) {\n        _this2.usuario = miUsuario;\n      }\n    })();\n  }\n  isAuthenticated() {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      const token = yield _this3._storage?.get('usuario');\n      _this3.isLoggedIn = !!token;\n      console.log(_this3.isLoggedIn);\n      return _this3.isLoggedIn;\n    })();\n  }\n  static #_ = this.ɵfac = function BdlocalService_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || BdlocalService)(i0.ɵɵinject(i1.Storage));\n  };\n  static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: BdlocalService,\n    factory: BdlocalService.ɵfac,\n    providedIn: 'root'\n  });\n}","map":{"version":3,"names":["BdlocalService","constructor","storage","usuario","_storage","Init","_this","_asyncToGenerator","create","logIn","uName","ingresado","unshift","username","joined","set","console","log","cargarDatos","_this2","miUsuario","get","isAuthenticated","_this3","token","isLoggedIn","_","i0","ɵɵinject","i1","Storage","_2","factory","ɵfac","providedIn"],"sources":["C:\\Users\\Envy\\Documents\\GitHub\\WikiVal\\src\\app\\services\\bdlocal.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { Storage } from '@ionic/storage-angular';\r\nimport { Users } from '../interfaces/users';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class BdlocalService {\r\n  private isLoggedIn?: boolean;\r\n  usuario: Users[] = [];\r\n  private _storage: Storage | null=null;\r\n\r\n  constructor(private storage : Storage) {\r\n    this.Init();\r\n  }\r\n  async Init(){\r\n    const storage = await this.storage.create();\r\n    this._storage = storage;\r\n  }\r\n\r\n  logIn(uName:string, ingresado: boolean){\r\n    this.usuario.unshift({username:uName, joined: ingresado})\r\n    this._storage?.set('usuario',this.usuario);\r\n    console.log('Usuario guardado')\r\n  }\r\n\r\n  async cargarDatos(){\r\n    const miUsuario= await this.storage.get('usuario');\r\n    if(miUsuario){\r\n      this.usuario=miUsuario;\r\n    }\r\n  }\r\n\r\n  async isAuthenticated(){\r\n    const token = await this._storage?.get('usuario')\r\n    this.isLoggedIn = !!token;\r\n    console.log(this.isLoggedIn)\r\n    return this.isLoggedIn;\r\n  }\r\n}\r\n"],"mappings":";;;AAOA,OAAM,MAAOA,cAAc;EAKzBC,YAAoBC,OAAiB;IAAjB,KAAAA,OAAO,GAAPA,OAAO;IAH3B,KAAAC,OAAO,GAAY,EAAE;IACb,KAAAC,QAAQ,GAAiB,IAAI;IAGnC,IAAI,CAACC,IAAI,EAAE;EACb;EACMA,IAAIA,CAAA;IAAA,IAAAC,KAAA;IAAA,OAAAC,iBAAA;MACR,MAAML,OAAO,SAASI,KAAI,CAACJ,OAAO,CAACM,MAAM,EAAE;MAC3CF,KAAI,CAACF,QAAQ,GAAGF,OAAO;IAAC;EAC1B;EAEAO,KAAKA,CAACC,KAAY,EAAEC,SAAkB;IACpC,IAAI,CAACR,OAAO,CAACS,OAAO,CAAC;MAACC,QAAQ,EAACH,KAAK;MAAEI,MAAM,EAAEH;IAAS,CAAC,CAAC;IACzD,IAAI,CAACP,QAAQ,EAAEW,GAAG,CAAC,SAAS,EAAC,IAAI,CAACZ,OAAO,CAAC;IAC1Ca,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAC;EACjC;EAEMC,WAAWA,CAAA;IAAA,IAAAC,MAAA;IAAA,OAAAZ,iBAAA;MACf,MAAMa,SAAS,SAAQD,MAAI,CAACjB,OAAO,CAACmB,GAAG,CAAC,SAAS,CAAC;MAClD,IAAGD,SAAS,EAAC;QACXD,MAAI,CAAChB,OAAO,GAACiB,SAAS;MACxB;IAAC;EACH;EAEME,eAAeA,CAAA;IAAA,IAAAC,MAAA;IAAA,OAAAhB,iBAAA;MACnB,MAAMiB,KAAK,SAASD,MAAI,CAACnB,QAAQ,EAAEiB,GAAG,CAAC,SAAS,CAAC;MACjDE,MAAI,CAACE,UAAU,GAAG,CAAC,CAACD,KAAK;MACzBR,OAAO,CAACC,GAAG,CAACM,MAAI,CAACE,UAAU,CAAC;MAC5B,OAAOF,MAAI,CAACE,UAAU;IAAC;EACzB;EAAC,QAAAC,CAAA,G;qCA/BU1B,cAAc,EAAA2B,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,OAAA;EAAA;EAAA,QAAAC,EAAA,G;WAAd/B,cAAc;IAAAgC,OAAA,EAAdhC,cAAc,CAAAiC,IAAA;IAAAC,UAAA,EAFb;EAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}